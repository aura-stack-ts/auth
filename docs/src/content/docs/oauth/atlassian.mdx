---
title: Atlassian Authorization Provider
description: Add Atlassian authorization provider to Aura Auth to authentication and authorize
---

## Atlassian

Set up `Atlassian` authorization provider to the authentication instance to Aura Auth.

---

## What you'll learn

Through this quick start guide you are going to learn and understand the basics and how to set up `Atlassian` provider to Aura Auth.

- [Atlassian OAuth App](#atlassian-oauth-app)
  - [Creating an OAuth App](#creating-an-oauth-app)
- [Atlassian Aura Auth](#atlassian-aura-auth)
  - [Installation](#installation)
  - [Environment setup](#environment-setup)
  - [Configure the provider](#configure-the-provider)
  - [Get HTTP handlers](#get-http-handlers)
- [Resources](#resources)

---

<Steps>

<Step>

## Atlassian OAuth App

### Creating an OAuth app

The first step is to create and register an [`Atlassian OAuth 2.0 Integration`](https://developer.atlassian.com/console/myapps/) to grant access to the user's accessible resources like `Get Authenticated User` (used by Aura Auth), `Repositories`, `Organizations`, etc. For more detailed information, read [Creating an OAuth app](https://docs.atlassian.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app) and [Get authenticated user](https://docs.atlassian.com/en/rest/users/users?apiVersion=2022-11-28#get-the-authenticated-user).

Registering an Atlassian OAuth app includes:

- `Name`: The name of the application according to its purpose.
- `Terms`: Check the terms and conditions.

#### Permissions Panel

- `Scope`: Click the `Add` button in the `User Identity API` row and then enable the `View active user profile` scope with the code `read:me`

#### Authorization

- `Callback URLs`: Add `OAuth 2.0 (3LO) action` and set the URLs to which Atlassian will redirect. It should end in `/auth/callback/atlassian` for both local and production environments.
  - Local environment: `http://localhost:3000/auth/callback/atlassian`
  - Production environment: Set the URL of your application.

#### Settings Panel

- `Description`: Description of what the consumer does

</Step>

<Step>

## Atlassian Aura Auth

### Installation

install the package using a package manager like `npm`, `pnpm` or `yarn`

```npm
npm install @aura-stack/auth
```

</Step>

<Step>

### Environment setup

Now, it's time to create and consume the Atlassian credentials required and used by Aura Auth, it include the `client Id` and `client Secret` and write them into a `.env` file.

Additionally set the `secret` used by Aura Auth to sign and encrypt the user's session.

```bash title=".env" lineNumbers
# Atlassian Credentials
AURA_AUTH_ATLASSIAN_CLIENT_ID="atlassian_client_id"
AURA_AUTH_ATLASSIAN_CLIENT_SECRET="atlassian_client_secret"

# Aura Secret
AURA_AUTH_SECRET="32-bytes-secret"
```

<Callout type="warning">
  The `AURA_AUTH_SECRET` will recommended to be random and high antropy key to avoid attackers decifer the secret used by the Aura
  Auth application.
</Callout>

</Step>

<Step>

### Configure the provider

Set the `oauth` option of the `createAuth` instance and writing `"atlassian"` name.

```ts title="@/auth" lineNumbers
import { createAuth } from "@aura-stack/auth"

export const auth = createAuth({
  oauth: ["atlassian"],
})

export const { handlers } = auth
```

</Step>

<Step>

### Get HTTP Handlers

Use the HTTP handlers to consume the authentication logic and flow the Aura Auth library to be integrated into routers and frameworks.

```ts title="backend.ts" lineNumbers
import { handlers } from "@/auth"

export const { GET, POST } = handlers
```

<Callout>
  The returned handlers include pre-built routes used in OAuth flows (`/signIn/:oauth`, `/callback/:oauth`, `/session`, `/signOut`
  and `/csrfToken`). You can mount them in Express, Hono, Next.js, or any runtime that supports native Request and Response APIs.
</Callout>

</Step>

</Steps>

---

## Resources

- [RFC - The OAuth 2.0 Authorization Framework](https://datatracker.ietf.org/doc/html/rfc6749)
- [Atlassian - OAuth Apps](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps/)
- [Atlassian - My Apps](https://developer.atlassian.com/console/myapps/)
- [Atlassian - Retrieve Authenticated User](https://developer.atlassian.com/cloud/jira/software/oauth-2-3lo-apps/#how-do-i-retrieve-the-public-profile-of-the-authenticated-user-)
